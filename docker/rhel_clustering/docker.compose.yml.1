version: '3.8'

services:
  rhel-node1:
    image: registry.access.redhat.com/ubi9/ubi-init
    container_name: rhel-node1
    hostname: rhel-node1
    privileged: true
    networks:
      cluster-net:
        ipv4_address: 172.28.0.11
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
      - node1-data:/var/lib/pacemaker
    tmpfs:
      - /run
      - /tmp
    command: /sbin/init
    restart: unless-stopped

  rhel-node2:
    image: registry.access.redhat.com/ubi9/ubi-init
    container_name: rhel-node2
    hostname: rhel-node2
    privileged: true
    networks:
      cluster-net:
        ipv4_address: 172.28.0.12
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
      - node2-data:/var/lib/pacemaker
    tmpfs:
      - /run
      - /tmp
    command: /sbin/init
    restart: unless-stopped

networks:
  cluster-net:
    driver: bridge
    ipam:
      config:
        - subnet: 172.28.0.0/16

volumes:
  node1-data:
  node2-data: